
# Лабораторная работа по дисциплине «Операционные системы» № 2 **«Установка операционной системы FreeBSD»** #
Цель работы:
- ознакомиться с основными понятиями FreeBSD;
- научиться инсталлировать FreeBSD.
## Теоретическая часть ##

<p align="justify">FreeBSD - свободная операционная система семейства UNIX.  FreeBSD разрабатывается как целостная операционная система. Исходный код ядра, драйверов устройств и базовых пользовательских программ, таких как командные оболочки и т. п., содержится в одном дереве системы управления версиями. Это отличает FreeBSD от GNU/Linux — другой свободной UNIX-подобной операционной системы, в которой ядро разрабатывается одной группой разработчиков, набор пользовательских программ — другими (например, проект GNU). А многочисленные группы собирают это всё в единое целое и выпускают в виде различных дистрибутивов Linux.

<p align="justify">FreeBSD хорошо зарекомендовала себя как система для построения интранет- и интернет-сетей и серверов. Она предоставляет надёжные сетевые службы и эффективное управление памятью.

<p align="justify">Помимо своей стабильности, FreeBSD популярна и благодаря своей лицензии, которая существенно отличается от широко известной лицензии GNU GPL. Лицензия BSD позволяет использовать код не только в свободном ПО, но и в проприетарном. Лицензия BSD является более простой и непритязательной, требуя лишь упоминания заимствования, авторства и отказ от навязывания ответственности (нельзя отсылать пользователей своего продукта к авторам заимствованного кода).

<p align="justify">Разработка FreeBSD началась в 1993 году с быстрорастущего набора патчей пользователей системы 386BSD. Этот набор позже вырос и отделился от 386BSD в отдельную операционную систему, включив в себя код от Free Software Foundation. Первая официальная версия FreeBSD 1.0 вышла в декабре 1993 года. Walnut Creek CDROM согласилась распространять FreeBSD на компакт-диске и также предоставила для работы проекту отдельный компьютер с интернет-соединением. Затем, в мае 1994 года, последовал успешный выпуск FreeBSD 1.1.

<p align="justify">Однако, из соображений законности использования исходных кодов BSD Net/2 в 386BSD, команда разработчиков FreeBSD переработала большую часть системы ко времени выпуска FreeBSD 2.0 в январе 1995 года, используя 4.4BSD-Lite. Руководство к FreeBSD содержит более подробную историческую информацию о происхождении системы.

### Версии FreeBSD###
__FreeBSD 3__

<p align="justify">3.0-RELEASE анонсирована 13 октября 1998 года. Основное отличие от 2.2 - переход на ELF исполняемые файлы. Последний 3.5-RELEASE вышел 23 июня 2000 года.

__FreeBSD 4__

<p align="justify">4.0-RELEASE появилась в марте 2000 года и последняя версия 4.11 была выпущена в январе 2005 года. FreeBSD 4 была очень популярной у интернет-провайдеров и хостеров времён первого «пузыря доткомов» и считалась одной из самых стабильных и высокопроизводительных систем класса Unix.
Одним из главных недостатков FreeBSD 4 считается плохая поддержка многопроцессорных систем, особенно в режиме многопоточности.
FreeBSD 4 поставила своеобразный рекорд по продолжительности разработки одной ветки операционной системы — за пять лет было устранено большое количество ошибок и получена на редкость стабильная система.

__FreeBSD 5__

<p align="justify">Через 3 года разработки, в январе 2003 года, была выпущена долгожданная версия 5.0-RELEASE. Эта версия предоставляла расширенную поддержку многопроцессорности и многопоточности, а также поддержку платформ UltraSPARC и IA-64.

<p align="justify">Наибольшие архитектурные изменения в FreeBSD 5 - это изменение механизма блокировки на нижнем уровне ядра, чтобы улучшить поддержку многопроцессорных SMP-систем. Это освободило большую часть ядра от так называемой «гигантской блокировки» (Giant lock). Теперь в ядре появилась возможность выполнять более одной задачи одновременно. Другим важным изменением была реализация «родной» поддержки многопоточности типа M:N под названием Kernel Scheduled Entities (KSE). Начиная с FreeBSD 5.3, эта реализация потоков была установлена по умолчанию, пока не была заменена на реализацию модели 1:1 во FreeBSD 7.

<p align="justify">Во FreeBSD 5 была серьёзно изменена система блочного ввода-вывода посредством введения модульной структурной системы преобразования запросов ввода-вывода GEOM (внесённой Poul-Henning Kamp). GEOM даёт возможность создавать различную функциональность, такую как зеркалирование (mirroring) или шифрование (модули GBDE и GELI).

<p align="justify">Версии 5.4 и 5.5 были признаны стабильными и высокопроизводительными, но более ранние версии не годились для использования в рабочих условиях. Более новые версии 3BSD не поддерживают оригинальный процессор Intel 80386, они поддерживаются только во FreeBSD 5.X и более ранних версиях (FreeBSD 5.2-RELEASE и более поздние не поддерживают процессор 80386SX). Следует заметить, что ядро GENERIC поддерживает процессоры 80386 только во FreeBSD 4.X и более ранних версиях.

__FreeBSD 6__

<p align="justify">FreeBSD 6.0 была выпущена 4 ноября 2005 года. 11 ноября 2008 года была выпущена версия 6.4. Эти версии являются продолжением оптимизации поддержки SMP и многопоточности вкупе с расширенной поддержкой стандарта 802.11, записью событий безопасности проекта TrustedBSD, серьёзными улучшениями производительности сетевой подсистемы. Основное достижение этого релиза — исключение «гигантской блокировки» (Giant lock) из виртуальной файловой подсистемы (VFS), реализация дополнительной, более производительной поддержки многопоточности (libthr) с моделью 1:1, и добавление OpenBSM — первичного модуля безопасности, который был создан проектом TrustedBSD.

__FreeBSD 7__

<p align="justify">FreeBSD 7.0 выпущена 27 февраля 2008 года. 5 января 2009 года вышла версия 7.1. Новое в этой ветке включает в себя:
- оптимизированный сетевой протокол транспортного уровня SCTP,
- экспериментальная адаптированная версия файловой системы ZFS (разработанной компанией Sun),
- компилятор GCC4.2,
- базовая поддержка платформы ARM,
- новый менеджер памяти jemalloc, оптимизированный для параллельных вычислений.

<p align="justify">Новая система показала значительные улучшения в скорости по сравнению с предыдущими версиями и системой Linux. 4 мая 2009 года вышла версия 7.2. Нововведения в этой версии:
- поддержка семейства процессоров UltraSPARC III (Cheetah) и SPARC64;
- возможность назначения нескольких IPv4- и IPv6-адресов каждой клетке — виртуальной машине Jail;
- реализация техники Superpages, прозрачного объединения страниц памяти для приложений;
- увеличенное до 6 Гб адресное пространство ядра для 64-разрядных процессоров;
- включена поддержка множественных таблиц маршрутизации, в том числе для клеток;
- из NetBSD портирован демон btpand с реализацией поддержки профилей Bluetooth Network Access Point (NAP), Group Ad-hoc Network (GN) и Personal Area Network User (PANU);
- обновлены драйверы сетевых и дисковых устройств.

<p align="justify">24 января 2011 года вышла версия 7.4. Поддержка ветки FreeBSD 7 истекла 28 февраля 2013 года

__FreeBSD 8__

<p align="justify">О выходе релиза FreeBSD 8.0 было объявлено 25 ноября 2009 года. Среди нововведений в этой версии можно отметить экспериментальную поддержку MIPS, основанную на разработках Juniper Networks.
Кроме того, следует отметить, что реализован новый контейнер виртуализации, названный «vimage». Поддерживаемые версии GNOME desktop environment (x11/gnome2) и KDE desktop environment (x11/kde4) были обновлены до 2.26.3 и 4.3.1 соответственно.
Стабильная ветка разработки 8-STABLE постоянно развивается, в неё постепенно вливается проверенный и отлаженный код из экспериментальной ветки разработки. Продолжается улучшение надёжности и быстродействия файловых систем UFS2 и ZFS, перерабатывается код протокола сетевого доступа NFS с целью реализации всех возможностей NFSv4.

__FreeBSD 9__

<p align="justify">FreeBSD 9.0 выпущена 12 января 2012 года. Основные изменения:
- переход на новый модульный инсталлятор BSDInstall;
- дисковая подсистема ATA/SATA по умолчанию заменена на реализацию на базе CAM (Common Access Method);
- файловая система UFS2 стала поддерживать операцию TRIM для SSD;
- добавлены новые 10Gb Ethernet-драйверы;
- универсальный USB-драйвер с поддержкой протоколов USB 3.0/2.0/1.1/1.0;
- графические среды GNOME версии 2.32.1, KDE версии 4.7.3

<p align="justify">Возможен запуск и работа FreeBSD на игровых приставках Sony PlayStation 3. FreeBSD 9.1 выпущена 31 декабря 2012 года.

__FreeBSD 10__

<p align="justify">FreeBSD 10.0 выпущена 20 января 2014 года. Основные изменения:
- заменён компилятор по умолчанию с GCC на Clang 3.3;
- возможность установки программой BSDInstall на раздел ZFS;
- драйверы для полной поддержки видеокарт Radeon, вплоть до серии HD 6000 (частичная поддержка серии HD 7000);
- реализована начальная поддержка демона auditdistd, что позволяет организовать ведение полного лога событий, который, в частности, может быть полезен для анализа причин и последствий инцидентов, связанных с нарушением безопасности. В настоящее время ядро передаёт события аудита напрямую в файл или через устройство /dev/auditpip;
- поддержка Raspberry Pi.

FreeBSD 10.1 выпущена 14 ноября 2014 года. FreeBSD 10.2 выпущена 13 августа 2015 года.

__FreeBSD 11__

<p align="justify">FreeBSD 11.0 выпущена 10 октября 2016 года. Основные изменения:
- новая система автоматического монтирования ФС (automounter), унифицированная с реализациями из других Unix-систем (macOS, Solaris), использующая совместимый с Solaris формат сопоставления точек монтирования и поддерживающая интеграцию с LDAP.
- в auto_master добавлен новый тип сопоставления «-media», позволяющий автоматизировать подключение внешних накопителей CD и USB, а также тип «-noauto» для обработки записей noauto в fstab.
- добавлена возможность загрузки с временным rootfs, вместо которого затем монтируется реальный корневой раздел. Процесс смены корневого раздела реализован в форме частичного завершения работы с удалением всех процессов, отмонтированием rootfs, монтированием нового rootfs, запуском процесса init и переходом к выполнению скриптов инициализации.

__FreeBSD 12__

<p align="justify">FreeBSD 12 выпущена 11 декабря 2018 года. Основные изменения:
- сильно изменён список поддерживаемых сетевых адаптеров, добавлены новые, выведены из поддержки драйверы для старых;
- улучшена поддержка процессоров Ryzen и Epyc;
- большое количество видеодрайверов теперь доступно в портах. Базовые драйверы предустановлены по умолчанию;
- улучшена поддержка виртуализации.

## Задание ##
<p align="justify">Запустите VirtualBox и создайте новую виртуальную машину. Назовите ее FreeBSD, тип и версия системы будут изменены по автоматически. Объем памяти и жесткого диска оставьте по умолчанию.

![alt-текст](02_01.jpg "Рис. 1")

<p align="justify">Запустите созданную виртуальную машину и выберите загрузчик, находящийся в папке с лабораторной работой.

![alt-текст](02_02.jpg "Рис. 2")

<p align="justify">Нажмите Продолжить, после этого загрузится установщик FreeBSD.

![alt-текст](02_03.png "Рис. 3")

<p align="justify">Нажмите Enter или подождите пока появится окно загрузчика.

![alt-текст](02_04.png "Рис. 4")

<p align="justify">Далее система попросит выбрать нужный язык раскладки клавиатуры. Можете оставить английский по умолчанию.
На следующем этапе введите имя компьютера, на который ставите систему. Это будет необходимо, например, для сетевого доступа к ресурсам компьютера. Например, freebsd-pc.

![alt-текст](02_05.png "Рис. 5")

<p align="justify">Далее система спросит об установке дополнительных архивов. По умолчанию выбраны 32-х битные библиотеки, необходимые для работы 32-х битных приложений, и коллекция портов. Также отмечаем пункт src. Для этого выберите этот пункт и нажмите Пробел.

![alt-текст](02_06.png "Рис. 6")
<p align="justify">Следующий этап очень важный - разметка диска. Установщик поддерживает установку FreeBSD на файловые системы ZFS и UFS. Если ваш компьютер имеет 4 или менее гигабайта оперативной памяти, и у вас нет кучи дисков, которые вы хотели бы собрать в RAID-массив, а также если вам не нужен такой функционал, как создание снимков состояния файловой системы - в использовании ZFS смысла нет. Сейчас выбираем классическую Unix File System (UFS).
Есть три способа осуществить разбиение дискового пространства для FreeBSD. Шаблонное (guided) разбиение автоматически настраивает разделы диска, ручное (manual) разбиение позволяет опытным пользователям создавать разделы согласно своим требованиям. И наконец, есть возможность вызвать командный интерпретатор, в котором можно будет непосредственно запускать утилиты.

![alt-текст](02_07.png "Рис. 7")
<p align="justify">Для FreeBSD может быть выделен весь диск или только его часть. Если выбирается Entire Disk, то создается стандартное разбиение, занимающее весь диск. Выбрав Partition, вы получите создание разделов в неиспользуемой области диска.

![alt-текст](02_08.png "Рис. 8")

<p align="justify">Выберем весь диск. Загрузится выбор схемы разбиения. Как правило, схема GPT является наиболее подходящей для PC-совместимых компьютеров. Для более старых операционных систем, которые несовместимы с GPT, может потребоваться разбиение MBR. Остальные схемы разбиения в общем используются для нераспространенных или старых компьютерных систем.

![alt-текст](02_09.png "Рис. 9")

<p align="justify">Существуют следующие схемы разбиения:
- APM	Apple Partition Map, используемая на PowerPC(R) Macintosh(R).
- BSD	Метки BSD без MBR, иногда называемые <<dangerously dedicated mode>>.
- GPT	Таблица разделов GUID.
- MBR	Master Boot Record.
- PC98	Разновидность MBR, используемая компьютерами NEC PC-98.
- VTOC8	Volume Table Of Contents, используемая компьютерами Sun SPARC64 и UltraSPARC.

<p align="justify">После того, как схема разбиения определена, повторный выбор Create приводит к созданию новых разделов диска.

![alt-текст](02_10.png "Рис. 10")

<p align="justify">Стандартная установка FreeBSD со схемой GPT создаст как минимум три раздела. Стандартные GPT разделы FreeBSD:
- freebsd-boot - загрузочный код FreeBSD.
- freebsd-ufs - файловая система UFS FreeBSD.
- freebsd-swap - FreeBSD область подкачки.

![alt-текст](02_11.png "Рис. 11")

После окончания разметки выбираем Finish и Commit. Начнётся установка.

![alt-текст](02_12.png "Рис. 12")

После распаковки архивов система попросит указать пароль root.

![alt-текст](02_13.png "Рис. 13")

<p align="justify">Далее будет настройка сетевых интерфейсов, временной зоны и выбор служб при запуске системы. Выберите нужные вам параметры.
Пропускаем раздел System Hardenng.

![alt-текст](02_14.png "Рис. 14")

<p align="justify">Соглашаемся на добавление пользователя в систему. Имя пользователя вводится с маленькой буквы, полное имя уже можно писать с большой. По сути на все вопросы можно отвечать клавишей Enter. Здесь важно лишь указать пароль для своего пользователя, в конце подтвердить введённые данные, набрав yes и нажав Enter, и отказаться от добавления других пользователей (набрав no и нажав Enter).

![alt-текст](02_15.png "Рис. 15")

Далее нажимаем Exit и перезагружаемся.

![alt-текст](02_16.png "Рис. 16")

Установка системы на этом окончена. После перезагрузки будет загружена сама система.

![alt-текст](02_17.png "Рис. 17")

## Контрольные вопросы ##
1. К какому семейству относится ОС FreeBSD?
2. Что значит свободная операционная система?
3. Какие существуют версии FreeBSD? Чем они отличаются?
4. Опишите этапы установки FreeBSD.
5. Какими способами можно произвести разметку диска при установке FreeBSD?
6. Какие можно выбрать схемы разбиения при установке FreeBSD?
7. Назовите стандартные разделы FreeBSD.

## Содержание отчета ##
<p align="justify"> Отчет сдается преподавателю в электронном виде. Файл с отчетом должен иметь название типа: Группа_Номер_лабораторной_Фамилия_студента/ов, например, 19-КБ-ИВ1_ЛР1_Криницкий.

1.	Название
2.	Цель работы
3.	Задание
4.	Ответы на контрольные вопросы
